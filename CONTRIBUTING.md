# Contributing to TDMU Dispatch

C·∫£m ∆°n b·∫°n ƒë√£ quan t√¢m ƒë·∫øn vi·ªác ƒë√≥ng g√≥p cho d·ª± √°n TDMU Dispatch! T√†i li·ªáu n√†y s·∫Ω h∆∞·ªõng d·∫´n b·∫°n c√°ch ƒë√≥ng g√≥p m·ªôt c√°ch hi·ªáu qu·∫£.

## üìã M·ª•c l·ª•c

- [Code of Conduct](#code-of-conduct)
- [C√°ch ƒë√≥ng g√≥p](#c√°ch-ƒë√≥ng-g√≥p)
- [Quy tr√¨nh ph√°t tri·ªÉn](#quy-tr√¨nh-ph√°t-tri·ªÉn)
- [Quy ∆∞·ªõc code](#quy-∆∞·ªõc-code)
- [Testing](#testing)
- [Commit Messages](#commit-messages)
- [Pull Request](#pull-request)
- [B√°o c√°o l·ªói](#b√°o-c√°o-l·ªói)
- [Y√™u c·∫ßu t√≠nh nƒÉng](#y√™u-c·∫ßu-t√≠nh-nƒÉng)

## ü§ù Code of Conduct

D·ª± √°n n√†y tu√¢n th·ªß [Contributor Covenant Code of Conduct](CODE_OF_CONDUCT.md). B·∫±ng c√°ch tham gia, b·∫°n ƒë·ªìng √Ω tu√¢n th·ªß c√°c quy t·∫Øc n√†y.

## üöÄ C√°ch ƒë√≥ng g√≥p

### B√°o c√°o l·ªói

1. **Ki·ªÉm tra Issues hi·ªán c√≥** ƒë·ªÉ tr√°nh tr√πng l·∫∑p
2. **S·ª≠ d·ª•ng template** b√°o c√°o l·ªói
3. **Cung c·∫•p th√¥ng tin chi ti·∫øt**:
   - M√¥ t·∫£ l·ªói
   - C√°c b∆∞·ªõc t√°i hi·ªán
   - K·∫øt qu·∫£ mong ƒë·ª£i
   - Screenshots (n·∫øu c√≥)
   - Th√¥ng tin m√¥i tr∆∞·ªùng

### Y√™u c·∫ßu t√≠nh nƒÉng

1. **M√¥ t·∫£ r√µ r√†ng** t√≠nh nƒÉng mong mu·ªën
2. **Gi·∫£i th√≠ch l√Ω do** t·∫°i sao c·∫ßn t√≠nh nƒÉng n√†y
3. **ƒê·ªÅ xu·∫•t c√°ch tri·ªÉn khai** (n·∫øu c√≥ th·ªÉ)
4. **Th·∫£o lu·∫≠n** v·ªõi team tr∆∞·ªõc khi implement

### ƒê√≥ng g√≥p code

1. **Fork** repository
2. **Clone** v·ªÅ m√°y local
3. **T·∫°o branch** m·ªõi cho feature/fix
4. **Implement** thay ƒë·ªïi
5. **Test** k·ªπ l∆∞·ª°ng
6. **Commit** v·ªõi message r√µ r√†ng
7. **Push** v√† t·∫°o Pull Request

## üîÑ Quy tr√¨nh ph√°t tri·ªÉn

### 1. Setup m√¥i tr∆∞·ªùng

```bash
# Fork v√† clone repository
git clone https://github.com/YOUR_USERNAME/tdmu-dispatch-dev.git
cd tdmu-dispatch-dev

# C√†i ƒë·∫∑t dependencies
npm install
cd apps/backend && npm install
cd ../frontend && npm install

# C·∫•u h√¨nh m√¥i tr∆∞·ªùng
cp .env.example .env
# Ch·ªânh s·ª≠a .env theo h∆∞·ªõng d·∫´n
```

### 2. T·∫°o branch m·ªõi

```bash
# ƒê·∫£m b·∫£o main branch up-to-date
git checkout main
git pull origin main

# T·∫°o branch m·ªõi
git checkout -b feature/your-feature-name
# ho·∫∑c
git checkout -b fix/your-bug-fix
```

### 3. Ph√°t tri·ªÉn

- **Tu√¢n th·ªß quy ∆∞·ªõc code** (xem ph·∫ßn d∆∞·ªõi)
- **Vi·∫øt tests** cho code m·ªõi
- **C·∫≠p nh·∫≠t documentation** n·∫øu c·∫ßn
- **Commit th∆∞·ªùng xuy√™n** v·ªõi message r√µ r√†ng

### 4. Testing

```bash
# Backend tests
cd apps/backend
npm run test
npm run test:e2e

# Frontend tests
cd apps/frontend
npm test

# Linting
npm run lint
```

### 5. Pull Request

- **M√¥ t·∫£ r√µ r√†ng** thay ƒë·ªïi
- **Li√™n k·∫øt Issues** li√™n quan
- **Cung c·∫•p screenshots** n·∫øu c√≥ UI changes
- **ƒê·∫£m b·∫£o CI/CD pass**

## üìù Quy ∆∞·ªõc code

### TypeScript/JavaScript

#### Naming Conventions
```typescript
// Variables v√† functions: camelCase
const userName = 'John';
function getUserData() { }

// Classes v√† Interfaces: PascalCase
class UserService { }
interface UserData { }

// Constants: UPPER_SNAKE_CASE
const MAX_RETRY_COUNT = 3;

// Files: kebab-case
user-profile.component.ts
auth.service.ts
```

#### Code Style
```typescript
// S·ª≠ d·ª•ng TypeScript strict mode
// Lu√¥n ƒë·ªãnh nghƒ©a types
interface User {
  id: number;
  name: string;
  email: string;
}

// S·ª≠ d·ª•ng async/await thay v√¨ Promises
async function fetchUser(id: number): Promise<User> {
  try {
    const response = await api.get(`/users/${id}`);
    return response.data;
  } catch (error) {
    throw new Error(`Failed to fetch user: ${error.message}`);
  }
}

// S·ª≠ d·ª•ng destructuring
const { name, email } = user;

// S·ª≠ d·ª•ng optional chaining
const userName = user?.profile?.name;
```

### Angular (Frontend)

#### Component Structure
```typescript
@Component({
  selector: 'app-user-profile',
  templateUrl: './user-profile.component.html',
  styleUrls: ['./user-profile.component.css']
})
export class UserProfileComponent implements OnInit {
  // Properties
  user: User;
  
  // Constructor injection
  constructor(private userService: UserService) {}
  
  // Lifecycle hooks
  ngOnInit(): void {
    this.loadUser();
  }
  
  // Methods
  private loadUser(): void {
    this.userService.getCurrentUser().subscribe(
      user => this.user = user
    );
  }
}
```

#### Service Pattern
```typescript
@Injectable({
  providedIn: 'root'
})
export class UserService {
  private readonly apiUrl = '/api/users';
  
  constructor(private http: HttpClient) {}
  
  getUsers(): Observable<User[]> {
    return this.http.get<User[]>(this.apiUrl);
  }
  
  createUser(user: CreateUserDto): Observable<User> {
    return this.http.post<User>(this.apiUrl, user);
  }
}
```

### NestJS (Backend)

#### Module Structure
```typescript
@Module({
  imports: [TypeOrmModule.forFeature([User])],
  controllers: [UserController],
  providers: [UserService],
  exports: [UserService]
})
export class UserModule {}
```

#### Controller Pattern
```typescript
@Controller('users')
export class UserController {
  constructor(private userService: UserService) {}
  
  @Get()
  async findAll(): Promise<User[]> {
    return this.userService.findAll();
  }
  
  @Post()
  async create(@Body() createUserDto: CreateUserDto): Promise<User> {
    return this.userService.create(createUserDto);
  }
}
```

#### Service Pattern
```typescript
@Injectable()
export class UserService {
  constructor(
    @InjectRepository(User)
    private userRepository: Repository<User>
  ) {}
  
  async findAll(): Promise<User[]> {
    return this.userRepository.find();
  }
  
  async create(createUserDto: CreateUserDto): Promise<User> {
    const user = this.userRepository.create(createUserDto);
    return this.userRepository.save(user);
  }
}
```

## üß™ Testing

### Backend Testing

#### Unit Tests
```typescript
describe('UserService', () => {
  let service: UserService;
  let repository: Repository<User>;
  
  beforeEach(async () => {
    const module = await Test.createTestingModule({
      providers: [
        UserService,
        {
          provide: getRepositoryToken(User),
          useClass: Repository
        }
      ]
    }).compile();
    
    service = module.get<UserService>(UserService);
    repository = module.get<Repository<User>>(getRepositoryToken(User));
  });
  
  it('should be defined', () => {
    expect(service).toBeDefined();
  });
  
  it('should create user', async () => {
    const createUserDto = { name: 'John', email: 'john@example.com' };
    const expectedUser = { id: 1, ...createUserDto };
    
    jest.spyOn(repository, 'create').mockReturnValue(expectedUser);
    jest.spyOn(repository, 'save').mockResolvedValue(expectedUser);
    
    const result = await service.create(createUserDto);
    expect(result).toEqual(expectedUser);
  });
});
```

#### E2E Tests
```typescript
describe('UserController (e2e)', () => {
  let app: INestApplication;
  
  beforeEach(async () => {
    const moduleFixture = await Test.createTestingModule({
      imports: [AppModule],
    }).compile();
    
    app = moduleFixture.createNestApplication();
    await app.init();
  });
  
  it('/users (GET)', () => {
    return request(app.getHttpServer())
      .get('/users')
      .expect(200);
  });
});
```

### Frontend Testing

#### Component Tests
```typescript
describe('UserProfileComponent', () => {
  let component: UserProfileComponent;
  let fixture: ComponentFixture<UserProfileComponent>;
  let userService: jasmine.SpyObj<UserService>;
  
  beforeEach(async () => {
    const spy = jasmine.createSpyObj('UserService', ['getCurrentUser']);
    
    await TestBed.configureTestingModule({
      declarations: [UserProfileComponent],
      providers: [
        { provide: UserService, useValue: spy }
      ]
    }).compileComponents();
    
    fixture = TestBed.createComponent(UserProfileComponent);
    component = fixture.componentInstance;
    userService = TestBed.inject(UserService) as jasmine.SpyObj<UserService>;
  });
  
  it('should load user on init', () => {
    const mockUser = { id: 1, name: 'John' };
    userService.getCurrentUser.and.returnValue(of(mockUser));
    
    component.ngOnInit();
    
    expect(userService.getCurrentUser).toHaveBeenCalled();
    expect(component.user).toEqual(mockUser);
  });
});
```

## üí¨ Commit Messages

S·ª≠ d·ª•ng [Conventional Commits](https://www.conventionalcommits.org/) format:

```
<type>[optional scope]: <description>

[optional body]

[optional footer(s)]
```

### Types
- `feat`: T√≠nh nƒÉng m·ªõi
- `fix`: S·ª≠a l·ªói
- `docs`: C·∫≠p nh·∫≠t t√†i li·ªáu
- `style`: Formatting, semicolons, etc.
- `refactor`: Refactoring code
- `test`: Th√™m tests
- `chore`: C·∫≠p nh·∫≠t build process, etc.

### Examples
```bash
feat(auth): add JWT authentication
fix(user): resolve user profile loading issue
docs(readme): update installation instructions
test(user): add unit tests for UserService
refactor(api): simplify user creation logic
```

## üîÑ Pull Request

### Template
```markdown
## M√¥ t·∫£
M√¥ t·∫£ ng·∫Øn g·ªçn v·ªÅ thay ƒë·ªïi

## Lo·∫°i thay ƒë·ªïi
- [ ] Bug fix
- [ ] New feature
- [ ] Breaking change
- [ ] Documentation update

## Testing
- [ ] Unit tests pass
- [ ] E2E tests pass
- [ ] Manual testing completed

## Screenshots (n·∫øu c√≥)
Th√™m screenshots cho UI changes

## Checklist
- [ ] Code follows style guidelines
- [ ] Self-review completed
- [ ] Documentation updated
- [ ] No console errors
- [ ] No linting errors
```

### Review Process
1. **Self-review** tr∆∞·ªõc khi submit
2. **CI/CD checks** ph·∫£i pass
3. **Code review** t·ª´ maintainers
4. **Address feedback** n·∫øu c√≥
5. **Merge** sau khi approved

## üêõ B√°o c√°o l·ªói

### Template
```markdown
## M√¥ t·∫£ l·ªói
M√¥ t·∫£ r√µ r√†ng v·ªÅ l·ªói

## C√°c b∆∞·ªõc t√°i hi·ªán
1. Go to '...'
2. Click on '....'
3. Scroll down to '....'
4. See error

## K·∫øt qu·∫£ mong ƒë·ª£i
M√¥ t·∫£ k·∫øt qu·∫£ mong ƒë·ª£i

## Screenshots
Th√™m screenshots n·∫øu c√≥

## M√¥i tr∆∞·ªùng
- OS: [e.g. Windows 10]
- Browser: [e.g. Chrome 91]
- Version: [e.g. 1.0.0]

## Th√¥ng tin b·ªï sung
Th√™m th√¥ng tin kh√°c n·∫øu c·∫ßn
```

## üí° Y√™u c·∫ßu t√≠nh nƒÉng

### Template
```markdown
## M√¥ t·∫£ t√≠nh nƒÉng
M√¥ t·∫£ r√µ r√†ng v·ªÅ t√≠nh nƒÉng mong mu·ªën

## L√Ω do
Gi·∫£i th√≠ch t·∫°i sao c·∫ßn t√≠nh nƒÉng n√†y

## Gi·∫£i ph√°p ƒë·ªÅ xu·∫•t
M√¥ t·∫£ c√°ch tri·ªÉn khai (n·∫øu c√≥)

## Alternatives
C√°c gi·∫£i ph√°p thay th·∫ø ƒë√£ xem x√©t

## Additional context
Th√™m context kh√°c n·∫øu c·∫ßn
```

## üìû Li√™n h·ªá

- **Email**: support@tdmu.edu.vn
- **GitHub Issues**: [T·∫°o issue m·ªõi](https://github.com/your-org/tdmu-dispatch-dev/issues)
- **Discussions**: [GitHub Discussions](https://github.com/your-org/tdmu-dispatch-dev/discussions)

## üôè C·∫£m ∆°n

C·∫£m ∆°n b·∫°n ƒë√£ ƒë√≥ng g√≥p cho d·ª± √°n TDMU Dispatch! M·ªçi ƒë√≥ng g√≥p, d√π l·ªõn hay nh·ªè, ƒë·ªÅu r·∫•t c√≥ gi√° tr·ªã.
