<div class="layout">
  <aside class="layout__sidebar">
    <!-- Doanh nghiệp icon -->
    <div class="sidebar__brand">
      <img src="/icons/tdmu.png" alt="Doanh nghiệp" title="Trang chủ">
    </div>

    <!-- Menu chính -->
    <div class="sidebar__menu">
      <div class="sidebar__menu-item" routerLink="/all-documents" routerLinkActive="active">
        <img src="/icons/documents.svg" alt="" title="Tất cả công văn">
        <span class="sidebar__tooltip">Tất cả công văn</span>
      </div>
      <div class="sidebar__menu-item" routerLink="/incoming-documents" routerLinkActive="active">
        <img src="/icons/incoming.svg" alt="" title="Công văn đến">
        <span class="sidebar__tooltip">Công văn đến</span>
      </div>
      <div class="sidebar__menu-item" routerLink="/outgoing-documents" routerLinkActive="active">
        <img src="/icons/outgoing.svg" alt="" title="Công văn đi">
        <span class="sidebar__tooltip">Công văn đi</span>
      </div>
      <div class="sidebar__menu-item" routerLink="/workflow-instances" routerLinkActive="active">
        <img src="/icons/workflow.svg" alt="" title="Quy trình xử lý">
        <span class="sidebar__tooltip">Quy trình xử lý</span>
      </div>
    </div>

    <!-- Cài đặt -->
    <div class="sidebar__footer">
      <div class="sidebar__menu-item" (click)="onLogout()">
        <img src="/icons/exit_to_app.svg" alt="" title="Đăng xuất">
        <span class="sidebar__tooltip">Đăng xuất</span>
      </div>
    </div>
  </aside>

  <div class="layout__main">
    <header class="header">
      <h1 class="header__title">Quản lí công văn</h1>
      <div class="header__tools">

        <button (click)="toggleTheme()" class="tool-btn" title="Chuyển chế độ sáng/tối">
          <img [src]="isDarkMode ? '/icons/sun.svg' : '/icons/moon.svg'" alt="Đổi giao diện">
        </button>

        <button class="tool-btn">
          <img src="/icons/calendar.svg" alt="Lịch" title="Lịch">
        </button>
        <button class="tool-btn">
          <img src="/icons/bell.svg" alt="Thông báo" title="Thông báo">
        </button>
        <button class="tool-btn" (click)="toggleAppsLauncher()">
          <img src="/icons/apps.svg" alt="Ứng dụng" title="Ứng dụng">
        </button>
        <div class="avatar">
          @if(currentUser) {
          <img class="avatar__img" [src]="currentUser.avatarFileId ? avatarUrl : '/icons/account_circle.svg'"
            [alt]="currentUser.fullName" [title]="currentUser.fullName">
          }
        </div>
      </div>
    </header>

    <main class="main-content">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>

<app-apps-launcher [isOpen]="isAppsLauncherOpen" (close)="isAppsLauncherOpen = false"></app-apps-launcher>
